<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="mapper.ChatMapper">
	<insert id="insertChat" parameterType="dto.ChattingDTO">
		insert into chat (chat_id,
		chat_content, chat_time, id, pro_id) values
		(chat_id_seq.nextval,#{chat_content},sysdate,#{id},#{pro_id})
	</insert>
	<select id="chatList" resultType="dto.ChattingDTO"
		parameterType="string">
		select chat_id, chat_content, to_char(chat_time,'hh24:MI')as chat_time,
		to_char(chat_time,'yy.mm.dd')as chat_date, id from chat where
		pro_id=#{pro_id}
	</select>
	<select id="dateList" resultType="dto.ChattingDTO"
		parameterType="string">
		select chat_date from (select to_char(chat_time,'yy.mm.dd') as chat_date
		from chat where pro_id=3) group by chat_date order by chat_date asc
	</select>
	<select id="today" resultType="string" parameterType="string">
	select to_char(sysdate,'yy.mm.dd') as chat_today from dual
	</select>
	
	<insert id="chatUpLoadFile" parameterType="dto.FileDTO">
	insert into pro_file (filename) values(#{upload})
	</insert>
</mapper>

